<!-- Toast para notificaciones -->
<p-toast></p-toast>

<!-- Contenedor principal centrado -->
<div class="login-container">
  <div class="login-content">
    <!-- Logo y título -->
    <div class="header-section">
      <p-avatar
        icon="pi pi-shield"
        size="xlarge"
        [style]="{'background-color': '#1e40af', 'color': 'white'}">
      </p-avatar>
      <h1 class="app-title">NotarIA Digital</h1>
    </div>

    <!-- Tarjeta de login -->
    <div class="card-wrapper">
      <p-card styleClass="login-card">
        <div class="card-header">
          <h2 class="form-title">Iniciar Sesión</h2>
          <p class="form-subtitle">Ingresa a tu cuenta para acceder a tus documentos</p>
        </div>

        <!-- Mensaje de error general -->
        @if (errorMessage()) {
          <p-message
            severity="error"
            [text]="errorMessage()"
            styleClass="w-full mb-4"
          ></p-message>
        }

        <!-- Formulario reactivo -->
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">

          <!-- Email -->
          <div class="form-field">
            <label for="email" class="field-label">Email</label>
            <input
              pInputText
              id="email"
              formControlName="email"
              type="email"
              class="w-full"
              placeholder="tu@email.com"
              [ngClass]="{'ng-invalid ng-dirty': hasError('email')}"
            />
            @if (hasError('email')) {
              <small class="error-message">
                {{ getErrorMessage('email') }}
              </small>
            }
          </div>

          <!-- Contraseña -->
          <div class="form-field">
            <label for="password" class="field-label">Contraseña</label>
            <p-password
              id="password"
              formControlName="password"
              [toggleMask]="true"
              [feedback]="false"
              placeholder="••••••••"
              styleClass="w-full"
              inputStyleClass="w-full"
              [ngClass]="{'ng-invalid ng-dirty': hasError('password')}"
            ></p-password>
            @if (hasError('password')) {
              <small class="error-message">
                {{ getErrorMessage('password') }}
              </small>
            }
          </div>

          <!-- Link de recuperación de contraseña -->
          <div class="forgot-password-link">
            <a routerLink="/auth/forgot-password" class="text-link">¿Olvidaste tu contraseña?</a>
          </div>

          <!-- Botón de login -->
          <p-button
            type="submit"
            label="Iniciar Sesión"
            [loading]="isLoading()"
            [disabled]="isLoading()"
            styleClass="w-full submit-button"
          ></p-button>
        </form>

        <!-- Link a registro -->
        <div class="footer-link">
          <p>¿No tienes cuenta? <a routerLink="/auth/register" class="register-link">Regístrate</a></p>
        </div>
      </p-card>
    </div>
  </div>
</div>
